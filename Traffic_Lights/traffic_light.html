<!doctype html>
<html lang="en">

<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<link rel="stylesheet" href="style.css">

<title> Traffic Light Control </title>
</head>

<body>
    <p>TRAFFIC LIGHT AT CROSSROADS</p>
    <div class="tab-content">      
            <div class="tf"> 
                <form  class="table1" id="form1">                               
                    <label class="form-label">Traffic Light One </label><br>     
                    0. GREEN:<br>
                    <input type="number" class="form-number" name="g1" min="0" max="255" id="green1"><br>                        
                    1. YELLOW:<br>
                    <input type="number" class="form-number" name="y1" min="0" max="255" id="yellow1"><br>              
                    2. RED:<br>
                    <input type="number" class="form-number" name="r1" min="0" max="255" id="red1"><br>
                    <div class="sub">
                        <input type="submit" class="btn btn-info" value="Apply" id="apply">
                    </div>
                </form>        
                <form class="table2" id="select1">                                    
                        <h6>Choose Mode:</h6>
                        <div class="mod1">
                            <input type="radio" class="form-check-input mt-0" name="mode1" id="mode1" value="0">
                            <label class="form-check-label" for="mode1"> Mode Auto</label>
                        </div>                        
                        <div class="mod2">    
                            <input type="radio" class="form-check-input mt-0" name="mode1" id="mode2" value="1">
                            <label class="form-check-label" for="mode2"> Mode Manual </label>
                        </div>
                        <br>
                        <h6>Choose Color:</h6>                      
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl1" id="color1" value="1">
                                <label class="form-check-label" for="color1"> Green </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl1" id="color2" value="2">
                                <label class="form-check-label" for="color2"> Yellow </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl1" id="color3" value="3">
                                <label class="form-check-label" for="color3"> Red </label>
                            </div>                        
                        
                        <div class="sub">
                            <input type="submit" class="btn btn-info" value="Submit" id="sumbit">
                        </div>                    
                </form>
                    <br><br>
                    <div class="image">
                        <img class="hinh" id="myImage1" src="Tathet.png" alt="" width="130px">
                        <br><br>          
                        <h5 id="cnt1"></h5>
                         <td class="sec"></td>                   
                    </div>  
            </div>
            
            
            <div class="tf"> 
                <form  class="table1" id="form2">                               
                    <label class="form-label">Traffic Light Two </label><br>     
                    0. GREEN:<br>
                    <input type="number" class="form-number" name="g2" min="0" max="255" id="green2"><br>                        
                    1. YELLOW:<br>
                    <input type="number" class="form-number" name="y2" min="0" max="255" id="yellow2"><br>              
                    2. RED:<br>
                    <input type="number" class="form-number" name="r2" min="0" max="255" id="red2"><br>
                    <div class="sub">
                        <input type="submit" class="btn btn-info" value="Apply" id="apply">
                    </div>
                </form>        
                <form class="table2" id="select2">                                    
                        <h6>Choose Mode:</h6>
                        <div class="mod1">
                            <input type="radio" class="form-check-input mt-0" name="mode2" id="mode1" value="0">
                            <label class="form-check-label" for="mode1"> Mode Auto</label>
                        </div>                        
                        <div class="mod2">    
                            <input type="radio" class="form-check-input mt-0" name="mode2" id="mode2" value="1">
                            <label class="form-check-label" for="mode2"> Mode Manual </label>
                        </div>
                        <br>
                        <h6>Choose Color:</h6>                      
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl2" id="color1" value="1">
                                <label class="form-check-label" for="color1"> Green </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl2" id="color2" value="2">
                                <label class="form-check-label" for="color2"> Yellow </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl2" id="color3" value="3">
                                <label class="form-check-label" for="color3"> Red </label>
                            </div>                        
                        
                        <div class="sub">
                            <input type="submit" class="btn btn-info" value="Submit" id="sumbit">
                        </div>                    
                </form>
                    <br><br>
                    <div class="image">
                        <img class="hinh" id="myImage2" src="Tathet.png" alt="" width="130px">
                        <br><br>           
                        <h5 id="cnt2"></h5>
                         <td class="sec"></td>                   
                    </div>  
            </div>
            
            <!-- class="btn btn-secondary" -->
            <div class="tf"> 
                <form  class="table1" id="form3">                               
                    <label class="form-label">Traffic Light Three </label><br>     
                    0. GREEN:<br>
                    <input type="number" class="form-number" name="g3" min="0" max="255" id="green1"><br>                        
                    1. YELLOW:<br>
                    <input type="number" class="form-number" name="y3" min="0" max="255" id="yellow1"><br>              
                    2. RED:<br>
                    <input type="number" class="form-number" name="r3" min="0" max="255" id="red1"><br>
                    <div class="sub">
                        <input type="submit" class="btn btn-info" value="Apply" id="apply">
                    </div>
                </form>        
                <form class="table2" id="select3">                                    
                        <h6>Choose Mode:</h6>
                        <div class="mod1">
                            <input type="radio" class="form-check-input mt-0" name="mode3" id="mode1" value="0">
                            <label class="form-check-label" for="mode1"> Mode Auto</label>
                        </div>                        
                        <div class="mod2">    
                            <input type="radio" class="form-check-input mt-0" name="mode3" id="mode2" value="1">
                            <label class="form-check-label" for="mode2"> Mode Manual </label>
                        </div>
                        <br>
                        <h6>Choose Color:</h6>                      
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl3" id="color1" value="1">
                                <label class="form-check-label" for="color1"> Green </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl3" id="color2" value="2">
                                <label class="form-check-label" for="color2"> Yellow </label>
                            </div>
                            <div class="radio">
                                <input type="radio" class="form-check-input mt-0" name="cl3" id="color3" value="3">
                                <label class="form-check-label" for="color3"> Red </label>
                            </div>                        
                        
                        <div class="sub">
                            <input type="submit" class="btn btn-info" value="Submit" id="sumbit">
                        </div>                    
                </form>
                    <br><br>
                    <div class="image">
                        <img class="hinh" id="myImage3" src="Tathet.png" alt="" width="130px">
                        <br><br>          
                        <h5 id="cnt3"></h5>
                         <td class="sec"></td>                   
                    </div>  
            </div>           
    </div>
</body>
    

<script> 

    $(document).ready(function(){
        
        $(document).on('submit','#form1', function(){
            $.post('auto.php',$('#form1').serialize());//,function(){alert("Send Data Auto")}
            return false;           
        });

        $(document).on('submit','#form2', function(){
            $.post('auto.php',$('#form2').serialize());
            return false;           
        });

        $(document).on('submit','#form3', function(){
            $.post('auto.php',$('#form3').serialize());
            return false;           
        });

        $(document).on('submit','#select1', function(){
        $.post('manual1.php',$('#select1').serialize());
            return false;          
        });

        $(document).on('submit','#select2', function(){
        $.post('manual2.php',$('#select2').serialize());//,function(){alert("Send Data Mode")}
            return false;          
        });

        $(document).on('submit','#select3', function(){
        $.post('manual3.php',$('#select3').serialize());
            return false;          
        });
        
        updateTime();
        updateManual();
    }); 

    function updateTime(){
        // gui http request xuong server
        $.post("readTime.php",
        function(data){
            // doc gia tri tu server gui len
            var t1 = data[0].time1;
            var t2 = data[0].time2;
            var t3 = data[0].time3;
            var trth1 = data[0].status1;
            var trth2 = data[0].status2;
            var trth3 = data[0].status3;
            var moder1 = data[0].mod1;
            var moder2 = data[0].mod2;
            var moder3 = data[0].mod3;
            
            //console.log(cdo1);
            // gan gia cho cac phan tu
            if(moder1==0){document.getElementById("cnt1").innerHTML = t1;}
            else {document.getElementById("cnt1").innerHTML = 'Mode Manual';}

            if(moder2==0){document.getElementById("cnt2").innerHTML = t2;}
            else {document.getElementById("cnt2").innerHTML = 'Mode Manual';}

            if(moder3==0){document.getElementById("cnt3").innerHTML = t3;}
            else {document.getElementById("cnt3").innerHTML = 'Mode Manual';}

            if(moder1==0){
                if(trth1 == 0){document.getElementById('myImage1').src='Xanh.png'}
                if(trth1 == 1){document.getElementById('myImage1').src='Vang.png'}
                if(trth1 == 2){document.getElementById('myImage1').src='Do.png'}}
            if(moder2==0){
                if(trth2 == 0){document.getElementById('myImage2').src='Xanh.png'}
                if(trth2 == 1){document.getElementById('myImage2').src='Vang.png'}
                if(trth2 == 2){document.getElementById('myImage2').src='Do.png'}}
            if(moder3==0){
                if(trth3 == 0){document.getElementById('myImage3').src='Xanh.png'}
                if(trth3 == 1){document.getElementById('myImage3').src='Vang.png'}
                if(trth3 == 2){document.getElementById('myImage3').src='Do.png'}}
        }) 
    }  
    // useing de set time and traffic light
    function updateManual(){
        // gui http request xuong server
        $.post("readManual.php",
        function(data){
            // doc gia tri tu server gui len
            var tt1 = data[0].Col1;
            var tt2 = data[0].Col2;
            var tt3 = data[0].Col3;
            var cdo1 =data[0].Mode1;
            var cdo2 =data[0].Mode2;
            var cdo3 =data[0].Mode3;
            //console.log(tt1);
            if(cdo1 == 1){
                if(tt1 == 1){document.getElementById('myImage1').src='Xanh.png'}
                if(tt1 == 2){document.getElementById('myImage1').src='Vang.png'}
                if(tt1 == 3){document.getElementById('myImage1').src='Do.png'}
            }
            if(cdo2 == 1){
                if(tt2 == 1){document.getElementById('myImage2').src='Xanh.png'}
                if(tt2 == 2){document.getElementById('myImage2').src='Vang.png'}
                if(tt2 == 3){document.getElementById('myImage2').src='Do.png'}
            }
            if(cdo3 == 1){
                if(tt3 == 1){document.getElementById('myImage3').src='Xanh.png'}
                if(tt3 == 2){document.getElementById('myImage3').src='Vang.png'}
                if(tt3 == 3){document.getElementById('myImage3').src='Do.png'}
            }
        }) 
    }  
    setInterval(updateTime,1000);
    setInterval(updateManual,1000);
</script>

</html>

